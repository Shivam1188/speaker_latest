(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[172],{72:(e,t,a)=>{"use strict";a.d(t,{default:()=>x});var r=a(5155),s=a(2115),i=a(9694),n=a(7129),o=a(1985),l=a(3861),c=a(9911),d=a(6408),u=a(5695),m=a(3568);let x=()=>{let e=(0,o.jL)(),t=(0,u.useRouter)(),{generatedParagraph:a,isLoading:x}=(0,o.GV)(e=>e.paragraph);console.log("generatedParagraph",a);let[g,h]=(0,s.useState)(!1),[p,f]=(0,s.useState)(!1),b=(0,s.useRef)(null),j=localStorage.getItem("username")||"unknown_user",y=["1","2","3","4","5","6","7","8","9","10","11","12"],v=["American","British","Australian","Indian","Canadian","Irish"],N=["Happy","Excited","Calm","Serious","Playful","Confident"],w=["Easy","Medium","Strong"],k=n.Ik({class:n.Yj().required("Class is required"),accent:n.Yj().required("Accent is required"),topic:n.Yj().required("Topic is required").min(3,"Topic must be at least 3 characters"),mood:n.Yj().required("Mood is required"),difficulty:n.Yj().required("Difficulty is required")});(0,s.useEffect)(()=>()=>{b.current&&(b.current.pause(),b.current=null)},[]);let P=(()=>{try{let e=localStorage.getItem("access_token")||sessionStorage.getItem("access_token")||"";return e?"Bearer ".concat(e):""}catch(e){return console.error("Error retrieving auth token:",e),""}})(),S=async()=>{if(!j||!P)return void m.oR.error("Authentication required");f(!0);try{let e=await fetch("".concat("https://www.edusmartai.com","/get-tts-audio?username=").concat(j),{headers:{Authorization:"".concat(P)}});if(!e.ok)throw Error("Audio fetch failed");let t=await e.blob(),a=URL.createObjectURL(t);b.current&&(b.current.pause(),b.current=null),b.current=new Audio(a),b.current.onended=()=>h(!1),b.current.onpause=()=>h(!1),await b.current.play(),h(!0)}catch(e){m.oR.error("Failed to play audio: "+e.message)}finally{f(!1)}};return(0,r.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4 py-8",children:(0,r.jsxs)(d.P.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},className:"w-full max-w-3xl bg-white shadow-xl rounded-xl overflow-hidden",children:[(0,r.jsx)("div",{className:"bg-indigo-600 py-4 px-6",children:(0,r.jsx)("h2",{className:"text-2xl font-bold text-white text-center",children:"Create Your English Practice"})}),(0,r.jsxs)("div",{className:"p-6",children:[(0,r.jsx)(i.l1,{initialValues:{class:"",accent:"",topic:"",mood:"",difficulty:""},validationSchema:k,onSubmit:t=>{e((0,l.mU)(t)).unwrap().catch(e=>{m.oR.error(e||"Failed to generate paragraph")})},children:e=>{let{isValid:t,dirty:a}=e;return(0,r.jsxs)(i.lV,{children:[(0,r.jsxs)("div",{className:"grid gap-6 mb-6 md:grid-cols-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["Class ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(i.D0,{as:"select",name:"class",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",children:[(0,r.jsx)("option",{value:"",children:"Select class"}),y.map(e=>(0,r.jsxs)("option",{value:e,children:["Grade ",e]},e))]}),(0,r.jsx)(i.Kw,{name:"class",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["Accent ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(i.D0,{as:"select",name:"accent",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",children:[(0,r.jsx)("option",{value:"",children:"Select accent"}),v.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)(i.Kw,{name:"accent",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,r.jsxs)("div",{className:"md:col-span-2",children:[(0,r.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["Topic ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsx)(i.D0,{type:"text",name:"topic",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",placeholder:"What do you want to talk about?"}),(0,r.jsx)(i.Kw,{name:"topic",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["Mood ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(i.D0,{as:"select",name:"mood",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",children:[(0,r.jsx)("option",{value:"",children:"Select mood"}),N.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)(i.Kw,{name:"mood",component:"div",className:"text-red-500 text-sm mt-1"})]}),(0,r.jsxs)("div",{children:[(0,r.jsxs)("label",{className:"block mb-2 text-sm font-medium text-gray-700",children:["Difficulty Level ",(0,r.jsx)("span",{className:"text-red-500",children:"*"})]}),(0,r.jsxs)(i.D0,{as:"select",name:"difficulty",className:"bg-gray-50 border border-gray-300 text-gray-900 text-sm rounded-lg focus:ring-indigo-500 focus:border-indigo-500 block w-full p-2.5",children:[(0,r.jsx)("option",{value:"",children:"Select difficulty"}),w.map(e=>(0,r.jsx)("option",{value:e,children:e},e))]}),(0,r.jsx)(i.Kw,{name:"difficulty",component:"div",className:"text-red-500 text-sm mt-1"})]})]}),(0,r.jsx)("div",{className:"flex justify-center mt-8",children:(0,r.jsx)("button",{type:"submit",disabled:x||!(t&&a),className:"px-6 py-3 rounded-full font-semibold text-white shadow-lg transition-all duration-300 transform hover:scale-105 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 ".concat(x||!(t&&a)?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-indigo-600 to-purple-600 hover:from-indigo-700 hover:to-purple-700"),children:x?(0,r.jsxs)("span",{className:"flex items-center",children:[(0,r.jsx)(c.hW,{className:"animate-spin mr-2"}),"Generating..."]}):"Generate Paragraph"})})]})}}),a&&(0,r.jsxs)(d.P.div,{initial:{opacity:0,height:0},animate:{opacity:1,height:"auto"},className:"mt-8 p-6 bg-indigo-50 rounded-xl border border-indigo-100",children:[(0,r.jsxs)("div",{className:"flex justify-between items-start",children:[(0,r.jsx)("h3",{className:"text-lg font-semibold text-indigo-800 mb-4",children:"Generated Paragraph"}),(0,r.jsxs)("button",{onClick:()=>{g&&b.current?(b.current.pause(),h(!1)):S()},disabled:p,className:"p-3 rounded-full relative ".concat(p?"text-indigo-300 cursor-not-allowed":g?"bg-indigo-200 text-indigo-600":"bg-indigo-100 text-indigo-600 hover:bg-indigo-200"," transition-colors"),"aria-label":g?"Pause audio":"Listen to paragraph",children:[p?(0,r.jsx)(c.hW,{className:"text-xl animate-spin"}):g?(0,r.jsx)(c.kwt,{className:"text-xl"}):(0,r.jsx)(c.pPd,{className:"text-xl"}),g&&!p&&(0,r.jsx)("div",{className:"absolute inset-0 flex items-center justify-center space-x-1",children:[void 0,void 0,void 0].map((e,t)=>(0,r.jsx)(d.P.span,{className:"w-1 h-4 bg-indigo-500 rounded-full",animate:{height:["0.5rem","1.25rem","0.5rem"]},transition:{duration:1,repeat:1/0,delay:.2*t}},t))})]})]}),(0,r.jsx)("div",{className:"bg-white p-4 rounded-lg shadow-inner",children:(0,r.jsx)("p",{className:"text-gray-700 leading-relaxed whitespace-pre-line",children:a})}),(0,r.jsx)("div",{className:"mt-4 flex justify-end",children:(0,r.jsx)("button",{onClick:()=>{if(!a)return void m.oR.error("No paragraph generated to practice");let e=encodeURIComponent(a);t.push("/practice?paragraph=".concat(e))},className:"px-4 py-2 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 transition-colors",children:"Practice now"})})]})]})]})})}},5695:(e,t,a)=>{"use strict";var r=a(8999);a.o(r,"usePathname")&&a.d(t,{usePathname:function(){return r.usePathname}}),a.o(r,"useRouter")&&a.d(t,{useRouter:function(){return r.useRouter}}),a.o(r,"useSearchParams")&&a.d(t,{useSearchParams:function(){return r.useSearchParams}})},9481:(e,t,a)=>{Promise.resolve().then(a.bind(a,72))}},e=>{var t=t=>e(e.s=t);e.O(0,[711,284,568,225,508,985,441,684,358],()=>t(9481)),_N_E=e.O()}]);