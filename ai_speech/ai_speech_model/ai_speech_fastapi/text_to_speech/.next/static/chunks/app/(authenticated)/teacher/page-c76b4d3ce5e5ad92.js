(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[310],{4105:(e,s,a)=>{"use strict";a.d(s,{A:()=>i});var l=a(2115),t=a(1985),r=a(4540),c=a(1963);let i=()=>{let[e,s]=(0,l.useState)(!0),a=(0,t.GV)(e=>e.auth.isAuthenticated),i=(0,r.wA)();return console.log(a),(0,l.useEffect)(()=>{(async()=>{try{await i((0,c._d)()).unwrap()}catch(e){console.error("Auth verification failed:",e)}finally{s(!1)}})()},[i]),{loading:e,isAuthenticated:a}}},5591:(e,s,a)=>{"use strict";a.d(s,{A:()=>c});var l=a(5155);a(2115);var t=a(1154),r=a(2596);let c=e=>{let{variant:s="primary",size:a="md",loading:c=!1,disabled:i=!1,children:n,className:d,...o}=e;return(0,l.jsxs)("button",{className:(0,r.A)("btn",{primary:"btn-primary",secondary:"btn-secondary",ghost:"btn-ghost",danger:"bg-red-600 text-white hover:bg-red-700 active:bg-red-800"}[s],{sm:"h-8 px-3 text-xs",md:"h-10 px-4 text-sm",lg:"h-12 px-6 text-base"}[a],d),disabled:i||c,...o,children:[c&&(0,l.jsx)(t.A,{className:"mr-2 h-4 w-4 animate-spin"}),n]})}},5814:(e,s,a)=>{Promise.resolve().then(a.bind(a,9684)),Promise.resolve().then(a.bind(a,8912))},8912:(e,s,a)=>{"use strict";a.d(s,{default:()=>x});var l=a(5155),t=a(2115),r=a(6710),c=a(4540),i=a(4113),n=a(5591);let d=e=>{let{value:s,className:a=""}=e,t=Math.min(100,Math.max(0,s));return(0,l.jsx)("div",{className:"w-full bg-gray-200 rounded-full overflow-hidden ".concat(a),children:(0,l.jsx)("div",{className:"h-2 bg-blue-500 transition-all duration-300 ease-in-out",style:{width:"".concat(t,"%")}})})};var o=a(2337),m=a(7434),h=a(4416);let x=()=>{let e=(0,c.wA)(),{class:s,subject:a,curriculum:x,isLoading:u,error:p,progress:j,ocrResults:b}=(0,c.d4)(e=>e.teacher),[g,v]=(0,t.useState)(!1),[N,f]=(0,t.useState)([]),[y,w]=(0,t.useState)(!1),C=(0,t.useCallback)(e=>{f(s=>[...s,...e])},[]),S=e=>{f(s=>s.filter(s=>s.name!==e))},{getRootProps:A,getInputProps:k,isDragActive:P}=(0,r.VB)({onDrop:C,accept:{"image/*":[".jpeg",".png",".jpg"],"application/pdf":[".pdf"],"application/vnd.ms-powerpoint":[".ppt",".pptx"]},maxSize:0xa00000}),E=async()=>{if(!s||!a||!x)return void alert("Please select class, subject, and curriculum");if(0===N.length)return void alert("Please upload at least one file");try{w(!0),await e((0,i.HX)(N))}catch(e){console.error("Processing error:",e)}finally{w(!1)}};return(0,l.jsxs)("div",{className:"max-w-4xl mx-auto p-6",children:[(0,l.jsx)("h1",{className:"text-3xl font-bold mb-6",children:"Upload Teaching Materials"}),(0,l.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Class"}),(0,l.jsxs)("select",{value:s||"",onChange:s=>e((0,i.dk)(s.target.value)),className:"w-full p-2 border rounded",children:[(0,l.jsx)("option",{value:"",children:"Select Class"}),["Grade 1","Grade 2","Grade 3","Grade 4","Grade 5"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Subject"}),(0,l.jsxs)("select",{value:a||"",onChange:s=>e((0,i.jN)(s.target.value)),className:"w-full p-2 border rounded",children:[(0,l.jsx)("option",{value:"",children:"Select Subject"}),["Math","Science","History","English","Art"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]}),(0,l.jsxs)("div",{children:[(0,l.jsx)("label",{className:"block text-sm font-medium mb-2",children:"Curriculum"}),(0,l.jsxs)("select",{value:x||"",onChange:s=>e((0,i.mM)(s.target.value)),className:"w-full p-2 border rounded",children:[(0,l.jsx)("option",{value:"",children:"Select Curriculum"}),["CBSE","ICSE","State Board","IGCSE"].map(e=>(0,l.jsx)("option",{value:e,children:e},e))]})]})]}),(0,l.jsxs)("div",{...A(),className:"border-2 border-dashed rounded-lg p-8 text-center mb-6 cursor-pointer\n          ".concat(P?"border-blue-500 bg-blue-50":"border-gray-300"),children:[(0,l.jsx)("input",{...k()}),(0,l.jsx)(o.A,{className:"mx-auto h-12 w-12 text-gray-400"}),(0,l.jsx)("p",{className:"mt-2",children:P?"Drop files here":"Drag & drop files here, or click to select"}),(0,l.jsx)("p",{className:"text-sm text-gray-500 mt-1",children:"Supports PDF, PPT, JPG, PNG (max 10MB each)"})]}),N.length>0&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold mb-3",children:"Selected Files"}),(0,l.jsx)("div",{className:"space-y-2",children:N.map(e=>(0,l.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded",children:[(0,l.jsxs)("div",{className:"flex items-center",children:[(0,l.jsx)(m.A,{className:"text-gray-500 mr-3"}),(0,l.jsx)("span",{className:"truncate max-w-xs",children:e.name}),(0,l.jsxs)("span",{className:"text-gray-500 text-sm ml-2",children:["(",(e.size/1024/1024).toFixed(2),"MB)"]})]}),(0,l.jsx)(n.A,{variant:"ghost",size:"icon",onClick:()=>S(e.name),className:"",children:(0,l.jsx)(h.A,{className:"h-4 w-4"})})]},e.name))})]}),u&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsx)("p",{className:"mb-2",children:"Processing files with Google Vision OCR..."}),(0,l.jsx)(d,{value:j,className:"h-2"})]}),p&&(0,l.jsxs)("div",{className:"mb-6 p-3 bg-red-50 text-red-700 rounded",children:["Error: ",p]}),Object.keys(b).length>0&&(0,l.jsxs)("div",{className:"mb-6",children:[(0,l.jsxs)("div",{className:"flex justify-between items-center mb-3",children:[(0,l.jsx)("h2",{className:"text-xl font-semibold",children:"OCR Results"}),(0,l.jsx)(n.A,{variant:"outline",onClick:()=>v(!g),className:"",children:g?"Hide Results":"Show Results"})]}),g&&(0,l.jsx)("div",{className:"space-y-4",children:Object.entries(b).map(e=>{let[s,a]=e;return(0,l.jsxs)("div",{className:"p-4 bg-gray-50 rounded",children:[(0,l.jsx)("h3",{className:"font-medium mb-2",children:s}),(0,l.jsx)("div",{className:"p-3 bg-white border rounded max-h-60 overflow-y-auto",children:a||"No text detected"})]},s)})})]}),(0,l.jsxs)("div",{className:"flex gap-3",children:[(0,l.jsx)(n.A,{onClick:E,disabled:y||0===N.length,className:"",children:y?"Processing...":"Upload & Process"}),(0,l.jsx)(n.A,{variant:"outline",onClick:()=>{f([]),e((0,i.t)())},className:"",children:"Reset"})]})]})}},9684:(e,s,a)=>{"use strict";a.d(s,{default:()=>i});var l=a(5155),t=a(5695),r=a(2115),c=a(4105);let i=e=>{let{children:s}=e,a=(0,t.useRouter)(),{isAuthenticated:i,loading:n}=(0,c.A)();return(console.log(i),(0,r.useEffect)(()=>{n||i||a.replace("/signin")},[i,n,a]),n||!i)?(0,l.jsx)("div",{className:"min-h-screen flex items-center justify-center",children:(0,l.jsx)("p",{children:"Loading..."})}):s}}},e=>{var s=s=>e(e.s=s);e.O(0,[284,586,985,441,684,358],()=>s(5814)),_N_E=e.O()}]);